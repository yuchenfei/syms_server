{% extends 'wx/base.html' %}

{% block title %}
    {{ feedback.experiment.item.name }} 反馈
{% endblock %}

{% block container %}
    <div class="weui-cells__title">反馈内容</div>
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p>{{ feedback.content }}</p>
            </div>
        </div>
    </div>
    {% if images %}
        <div class="weui-cells__title">附件</div>
        <div class="weui-cells weui-cells_form" id="uploader">
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <div class="weui-uploader">
                        <div class="weui-uploader__bd">
                            <ul class="weui-uploader__files" id="uploaderFiles">
                                {% for image in images %}
                                    <li class="weui-uploader__file" style="background-image:url('{{ image }}')"></li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
    <!-- gallery -->
    <div class="weui-gallery" id="gallery">
        <span class="weui-gallery__img" id="galleryImg"></span>
    </div>
{% endblock %}

{% block extrascript %}
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">
        const $uploaderFiles = $("#uploaderFiles"),
            $gallery = $("#gallery"),
            $galleryImg = $("#galleryImg")
        ;
        // 点击预览
        $uploaderFiles.on("click", "li", function () {
            index = $(this).index();
            $galleryImg.attr("style", this.getAttribute("style"));
            $gallery.fadeIn(100);
        });
        // 点击退出预览
        $gallery.on("click", function () {
            $gallery.fadeOut(100);
        });
    </script>
{% endblock %}